# 02. 운영체제 구조

### **운영체제 서비스**

- `**사용자 인터페이스**`: CLI, GUI(가장 보편적) 등으로 제공한다.
- `**프로그램 실행**`: 시스템은 프로그램을 메모리에 적재해 실행할 수 있어야 한다.
- `**입출력 연산**`: 운영체제는 입출력 실행의 수단을 제공한다.
- `**파일시스템 조작**`: 다양한 파일 시스템을 제공한다.
- `**통신**`: 메시지 전달 기법(IPC를 위해 커널을 통해 메시지를 전달하는 방식)에 의해 통신이 일어날 때 정보의 패킷들이 운영체제에 의해 프로세스들 사이를 이동한다.
- `**오류 탐지**`: 모든 가능한 오류를 항상 의식하고 있어야 하며, 올바르고 일관성있는 계산을 보장하기 위해 각 유형의 오류에 대해 적당한 조치를 취해야 한다.

사용자에 도움을 주는 것이 목적이 아니라 시스템 자체의 효율적인 동작을 보장하기 위한 운영체제 기능들도 존재한다.

- `**자원 할당**`: 다수의 사용자나 다수의 작업들이 동시에 실행될 때 그들 각각에 자원을 할당해 주어야 한다. 예를 들면 CPU를 최대한 효율적으로 이용하기 위해 운영체제는 CPU 스케줄링 루틴이 CPU의 속도, 반드시 실행해야 할 작업들, 사용가능한 레지스터의 수와 다른 요인들을 고려하도록 해야 한다.
- `**회계**`: 사용자가 어떤 종류의 컴퓨터 자원을 얼마나 많이 사용하는지 추적, 관리한다.
- `**보호**`: 시스템 자원에 대한 모든 접근이 통제되도록 보장하는 것을 포함한다.

<br />

### **사용자 운영체제 인터페이스**

`사용자가 운영체제와 접촉하는 방식`에는 여러 방법이 있다. 그 중 한 방식은 명령어 해석기(또는 `CLI`)를 제공하는 것, 두 번째 방식은 사용자가 `GUI`를 통하여 운영체제와 접촉하게 하는 것이다.

- **명령 해석기(Command-Interpreter)**

선택할 수 있는 여러 명령어 해석기를 제공하는 시스템에서 이 해석기는 셸(shell)이라고 불린다. 명령어 해석기는 사용자가 지정한 명령을 가져와서 실행한다. 명령들은 파일을 생성, 삭제, 리스트, 프린트, 복사, 실행 등을 한다.

- **그래피컬 사용자 인터페이스(GUI)**

사용자는 마우스를 움직여 마우스 포인터를 프로그램, 파일, 시스템 기능 등을 나타내는 화면상의 이미지(아이콘)에 위치시킨다. 마우스 포인터의 위치에 따라 마우스 버튼을 누름으로써 프로그램을 호출하거나 파일 혹인 디렉터리를 선택할 수도 있고 또는 명령을 포함한 메뉴를 잡아당길 수도 있다.

<br />

### **시스템 호출(System Calls)**

시스템 호출은 운영 체제의 커널이 제공하는 서비스에 대해, 응용 프로그램의 요청에 따라 커널에 접근하기 위한 인터페이스이다.

프로그래밍 언어들을 위한 **실행시간 지원 시스템**은(컴파일러와 함께 제공되는 라이브러리에 내장된 함수의 집합) 운영체제가 제공하는 **시스템 호출에 대한 연결 고리로서 동작하는 시스템 호출 인터페이스를 제공**한다. 이 시스템 호출 인터페이스는 **API 함수의 호출을 가로채어 필요한 운영체제 시스템 호출**을 부른다.

각 시스템 호출에는 번호가 할당되고 시스템 호출 인터페이스는 이 번호에 따라 색인되는 테이블을 유지한다. 시스템 호출 인터페이스는 의도하는 시스템 호출을 부르고 시스템 호출의 상태와 반환 값을 돌려준다.

<br />

### **시스템 호출의 유형**

- **프로세스 제어**
  - 끝내기(end), 중지(abort)
  - 적재(load), 실행(execute)
  - 프로세스 생성(create_process)
  - 프로세스 속성 획득과 설정(get_process_attribute, set_process_attribute)
  - 시간 대기(wait_time)
  - 사건 대기(wait_event)
  - 사건을 알림(signal_event)
  - 메모리 할당 및 해제 : malloc, free
- **파일 조작**
  - 파일 생성(create), 파일 삭제(delete)
  - 열기(open), 닫기(close)
  - 읽기(read), 쓰기(write), 위치 변경(reposition)
  - 파일 속성 획득 및 설정(get_file_attribute, set_file_attribute)
- **장치 관리**
  - 장치를 요구(requests), 장치를 방출(release)
  - 읽기, 쓰기, 위치 변경0
  - 장치 속성 획득, 장치 속성 설정
  - 장치의 논리적 부착(attach) 또는 분리(detach)
- **정보 유지**
  - 시간과 날짜의 설정과 획득(time)
  - 시스템 데이터의 설정과 획득(date)
  - 프로세스 파일, 장치 속성의 획득 및 설정
- **통신**
  - 메시지 전달: 통신하는 두 프로세스가 정보를 교환하기 위하여 서로 메시지를 주고 받는다.
  - 공유 메모리: 다른 프로세스가 소유한 메모리 영역에 대한 접근을 위해 특정 시스템 호출을 사용한다.
- **보호**
  - 파일과 디스크와 같은 자원의 허가권한(set_permission, get_permission)
  - 특정 사용자가 지정된 자원에 대해 접근이 허가 혹은 불허되었는지의 여부를 명시(allow_user, deny_user)

<br />

### **시스템 프로그램**

논리적인 컴퓨터 계층구조를 기억해보자.(하드웨어→운영체제→시스템 프로그램→ 응용 프로그램)

시스템 프로그램은 시스템 유틸리티로도 알려진, 프로그램 개발과 실행을 위해 보다 편리한 환경을 제공한다.

- **`파일 관리` :** 파일과 디렉터리를 생성(create), 삭제(delete), 복사(copy), 이름변경(rename), 인쇄(print), 덤프(dump), 리스트(list) 등 일반적인 조작
- **`상태 정보` :** 시스템의 날짜(date), 사용가능한 메모리(memory)와 디스크의 공간의 양, 사용자 수 와같은 상태 정보를 제공한다.
- **`파일 변경` :** 디스크 혹은 다른 저장장치의 파일의 내용을 생성하고 변경하기위해 사용된다. Windows의 메모장(notepad)나 Linux의 vi, emacs 같은 것이 속한다. 통칭 문장 편집기(text editor(라 불린다.
- **`프로그래밍 언어 지원` :** 일반적인 프로그래밍 언어들(C, C++, JAVA 등)에 대한 컴파일러(Compilers), 어셈블러(Assemblers), 인터프리터(Interpreters)가 제공된다.
- **`프로그램 적재와 실행` :** 프로그램이 실행되기 위해서는 메모리에 적재되어야 한다. 그를 위한 절대 로더(absolute loader), 재배치 가능 로더(relocatable loder), 링키지 에디터(linkage editor)와 중첩 로드(overlay loader) 등을 제공할 수 있다.
- **`통신` :** E-mail, remote login, telnet 등을 통해 통신 관련 서비스를 제공한다.
